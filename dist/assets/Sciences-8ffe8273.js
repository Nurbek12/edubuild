import{a as b}from"./index-7376b9a9.js";import{r as c,l as L,m as B,a as o,o as M,c as P,w as t,b as e,f as p,d as u,t as V,e as W,n as N}from"./index-1590be2c.js";const X={class:"responsive-datatable"},Z={"data-label":"T/r"},ee={"data-label":"Fan nomi"},ae={"data-label":"Boshqarish"},te={class:"d-flex justify-end"},le=u("div",null,"Hech narsa topilmadi",-1),oe={class:"text-h5"},ce={__name:"Sciences",setup(ne){const T=[{title:"T/r",align:"start",key:"no",sortable:!1},{title:"Fan Nomi",key:"name"},{title:"Boshqarish",key:"actions",sortable:!1}],U=[a=>!!a||"Required"],x=c(""),h=c(null),d=c([]),r=c(!1),f=c(!1),s=c(-1),v=c(-1),i=c({name:""}),g={name:""},$=L(()=>s.value===-1?"Fan Yaratish":"Fanni O'zgartirish");B(r,a=>a||C()),B(f,a=>a||k());const D=async()=>{const{data:a}=await b.get("/science/");d.value=a},S=async()=>{const{valid:a}=await h.value.validate();a&&R()},H=a=>{s.value=d.value.indexOf(a),v.value=a._id,i.value=Object.assign({},a),r.value=!0},Y=a=>{s.value=d.value.indexOf(a),i.value=Object.assign({},a),v.value=a._id,f.value=!0},Q=async()=>{const{data:a}=await b.delete(`/science/${v.value}`);a&&(d.value.splice(s.value,1),k())},C=()=>{r.value=!1,N(()=>{var a;i.value=Object.assign({},g),v.value=-1,s.value=-1,(a=h.value)==null||a.reset()})},k=()=>{f.value=!1,N(()=>{var a;i.value=Object.assign({},g),v.value=-1,s.value=-1,(a=h.value)==null||a.reset()})},R=async()=>{if(s.value>-1){const{data:a}=await b.put(`/science/${v.value}`,i.value);Object.assign(d.value[s.value],a)}else{const{data:a}=await b.post("/science",i.value);d.value.push(a)}C()};return D(),(a,n)=>{const O=o("v-text-field"),_=o("v-col"),m=o("v-btn"),y=o("v-row"),j=o("v-sheet"),w=o("v-spacer"),A=o("v-data-table"),I=o("v-card-title"),E=o("v-form"),q=o("v-container"),G=o("v-card-text"),F=o("v-card"),z=o("v-dialog"),J=o("v-card-actions");return M(),P(q,{fluid:""},{default:t(()=>[e(y,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(j,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:t(()=>[e(y,{justify:"space-between"},{default:t(()=>[e(_,{cols:"12",sm:"4"},{default:t(()=>[e(O,{label:"Qidirish",modelValue:x.value,"onUpdate:modelValue":n[0]||(n[0]=l=>x.value=l),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"4",md:"3"},{default:t(()=>[e(m,{block:"",color:"primary",onClick:n[1]||(n[1]=l=>r.value=!0),variant:"tonal"},{default:t(()=>[p("Fan yaratish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(j,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:t(()=>[u("div",X,[e(A,{headers:T,search:x.value,items:d.value},{"item.no":t(({index:l})=>[u("td",Z,V(l+1)+".",1)]),"item.name":t(({item:l})=>[u("td",ee,V(l.raw.name),1)]),"item.actions":t(({item:l})=>[u("td",ae,[e(w),u("div",te,[e(m,{icon:"mdi-pencil",variant:"text",size:"40",color:"primary",onClick:K=>H(l.raw)},null,8,["onClick"]),e(m,{icon:"mdi-delete",variant:"text",size:"40",color:"primary",onClick:K=>Y(l.raw)},null,8,["onClick"])])])]),"no-data":t(()=>[le]),_:1},8,["search","items"])])]),_:1})]),_:1})]),_:1}),e(z,{modelValue:r.value,"onUpdate:modelValue":n[3]||(n[3]=l=>r.value=l),"max-width":"550px"},{default:t(()=>[e(F,null,{default:t(()=>[e(I,{class:"mt-2 ml-2 mb-0"},{default:t(()=>[u("span",oe,V(W($)),1)]),_:1}),e(G,{class:"px-2 pt-0"},{default:t(()=>[e(q,null,{default:t(()=>[e(E,{ref_key:"form",ref:h},{default:t(()=>[e(y,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(O,{modelValue:i.value.name,"onUpdate:modelValue":n[2]||(n[2]=l=>i.value.name=l),label:"Fan Nomi","hide-details":"",color:"primary",rules:U,variant:"outlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(m,{variant:"tonal",color:"primary",block:"",onClick:S,height:"45"},{default:t(()=>[p(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:f.value,"onUpdate:modelValue":n[4]||(n[4]=l=>f.value=l),"max-width":"500px"},{default:t(()=>[e(F,null,{default:t(()=>[e(I,{class:"text-h6"},{default:t(()=>[p(" Ushbu ma'lumotni ochirmoqchimisiz ")]),_:1}),e(J,null,{default:t(()=>[e(w),e(m,{color:"blue-darken-1",variant:"text",onClick:k},{default:t(()=>[p(" Yo'q ")]),_:1}),e(m,{color:"blue-darken-1",variant:"text",onClick:Q},{default:t(()=>[p(" Ha ")]),_:1}),e(w)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{ce as default};
