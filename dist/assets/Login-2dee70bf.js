import{a as z}from"./index-7376b9a9.js";import{u as U,r,a as o,o as B,c as I,w as t,b as e,e as L,f}from"./index-1590be2c.js";const N="/assets/education-c77d8176.png",K={__name:"Login",setup(S){const i=U(),l=r(!1),d=[n=>!!n||"Required"],u=r(null),a=r({login:"",password:""}),w=async()=>{const{data:n}=await z.post("/auth/login",{login:a.value.login,password:a.value.password});if(console.log(n),n.success)switch(i.commit("setUser",n.user),i.commit("setToken",n.token),localStorage.setItem("logintime",Date.now()),n.user.role){case"admin":window.location.href="/admin";break;case"student":window.location.href="/";break;case"inspector":window.location.href="/inspector";break;case"sa":window.location.href="/secret";break}else Object.assign(a.value,{login:"",password:""})},g=async()=>{const{valid:n}=await u.value.validate();n&&w()};return(n,s)=>{const x=o("v-img"),k=o("v-avatar"),_=o("v-card-text"),y=o("v-card-title"),p=o("v-text-field"),m=o("v-col"),v=o("v-row"),b=o("v-spacer"),h=o("v-btn"),V=o("v-card-actions"),j=o("v-form"),C=o("v-card"),T=o("v-container");return B(),I(T,{fluid:""},{default:t(()=>[e(v,{justify:"center",align:"center"},{default:t(()=>[e(C,{"max-width":"450px",width:"100%",class:"mt-10",color:"surface"},{default:t(()=>[e(_,{class:"d-flex justify-center"},{default:t(()=>[e(k,{rounded:"",size:"100"},{default:t(()=>[e(x,{src:L(N)},null,8,["src"])]),_:1})]),_:1}),e(y,{class:"d-flex justify-center"},{default:t(()=>[f("Tizimga Kirish")]),_:1}),e(j,{ref_key:"form",ref:u},{default:t(()=>[e(_,{class:"mt-2"},{default:t(()=>[e(v,null,{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[e(p,{modelValue:a.value.login,"onUpdate:modelValue":s[0]||(s[0]=c=>a.value.login=c),label:"Login",color:"primary","prepend-inner-icon":"mdi-account","hide-details":"",rules:d,variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(p,{modelValue:a.value.password,"onUpdate:modelValue":s[1]||(s[1]=c=>a.value.password=c),label:"Parol",color:"primary","prepend-inner-icon":"mdi-lock","hide-details":"",rules:d,variant:"outlined","append-inner-icon":l.value?"mdi-eye":"mdi-eye-off",type:l.value?"text":"password","onClick:appendInner":s[2]||(s[2]=c=>l.value=!l.value)},null,8,["modelValue","append-inner-icon","type"])]),_:1})]),_:1})]),_:1}),e(V,{class:"px-4"},{default:t(()=>[e(b),e(h,{color:"primary",onClick:g},{default:t(()=>[f("Tizimga kirish")]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}};export{K as default};
