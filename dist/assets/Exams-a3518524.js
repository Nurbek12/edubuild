import{a as b}from"./index-7376b9a9.js";import{r as c,l as ye,m as M,a as n,o as U,c as N,w as t,b as e,f as h,d as m,t as v,e as Ve,h as X,i as Z,F as ee,p as be,n as Q}from"./index-1590be2c.js";const he={"data-label":"T/r"},ge={"data-label":"Test Nomi"},ke={"data-label":"Fan"},we={"data-label":"Sanasi"},Ue={"data-label":"Muhlari"},Ce={"data-label":"Guruh"},Te={"data-label":"Testlar soni"},Oe={"data-label":"Boshqarish"},je={class:"d-flex justify-end"},$e=m("div",null,"Hech narsa topilmadi",-1),ze={class:"text-h5"},Be={class:"text-h5"},Ie={class:"text-subtitle-2"},qe={__name:"Exams",setup(Ne){const ae=[{title:"T/r",align:"start",key:"no",sortable:!1},{title:"Test Nomi",key:"name"},{title:"Fan",key:"science",sortable:!1},{title:"Guruh",key:"group",sortable:!1},{title:"Sanasi",key:"date",sortable:!1},{title:"Muhlati",key:"time",sortable:!1},{title:"Testlar soni",key:"count",sortable:!1},{title:"Boshqarish",key:"actions",sortable:!1}],i=[l=>!!l||"Required"],B=c(null),C=c(null),S=c(""),g=c([]),k=c(!1),T=c(!1),O=c(!1),y=c(-1),V=c(-1),q=c([]),R=c([]),p=c([]),w=c(null),u=c({text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]}),s=c({name:"",groups:[],science:"",count:0,time:0,date:""}),D={name:"",groups:[],science:"",count:0,time:0,date:""},te=ye(()=>y.value===-1?"Test Yaratish":"Testni O'zgartirish");M(k,l=>l||L()),M(O,l=>l||F()),M(T,l=>l||ce());const le=async()=>{const[l,o,r]=await Promise.all([b.get("/group"),b.get("/science"),b.get("/test")]);g.value=r.data,q.value=l.data,R.value=o.data},oe=async()=>{const{valid:l}=await B.value.validate();l&&ve()},se=async()=>{const{valid:l}=await C.value.validate();l&&pe()},ne=l=>{y.value=g.value.indexOf(l),V.value=l._id,s.value=Object.assign({},l),k.value=!0},ie=async l=>{if(!l.questions){const{data:o}=await b.get(`/test/id/${l._id}`);l.questions=o.questions}y.value=g.value.indexOf(l),V.value=l._id,p.value=l.questions,T.value=!0},ue=(l,o)=>{w.value=o,u.value=Object.assign({},l)},de=l=>{y.value=g.value.indexOf(l),s.value=Object.assign({},l),V.value=l._id,O.value=!0},re=async()=>{const{data:l}=await b.delete(`/test/${V.value}`);l&&(g.value.splice(y.value,1),F())},L=()=>{k.value=!1,Q(()=>{var l,o;s.value=Object.assign({},D),V.value=-1,y.value=-1,(l=B.value)==null||l.reset(),(o=C.value)==null||o.reset()})},F=()=>{O.value=!1,Q(()=>{var l,o;s.value=Object.assign({},D),V.value=-1,y.value=-1,(l=B.value)==null||l.reset(),(o=C.value)==null||o.reset()})},ce=()=>{T.value=!1,Q(()=>{s.value=Object.assign({},D),V.value=-1,p.value=[],y.value=-1,w.value=null,u.value=Object.assign({},{text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]})})},ve=async()=>{if(y.value>-1){const{data:l}=await b.put(`/test/${V.value}`,s.value);Object.assign(g.value[y.value],l)}else{const{data:l}=await b.post("/test",{questions:p.value,...s.value});console.log(l),g.value.push(l)}L()},me=()=>{p.value.push({text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]}),Q(()=>{document.querySelector(".test-scroll").scrollTop=document.querySelector(".test-scroll").scrollHeight})},P=async l=>{p.value[l]._id&&await b.delete(`/test/question/${p.value[l]._id}`),p.value.splice(l,1)},pe=async()=>{var l;if(w.value!==null){delete u.value._id;const{data:o}=await b.put(`/test/question/${p.value[w.value]._id}`,u.value);Object.assign(p.value[w.value],o)}else{const{data:o}=await b.post("/test/question",{test:V.value,...u.value});p.value.push(o)}w.value=null,u.value=Object.assign({},{text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]}),(l=C.value)==null||l.reset()};return le(),(l,o)=>{const r=n("v-text-field"),d=n("v-col"),_=n("v-btn"),j=n("v-row"),Y=n("v-sheet"),G=n("v-select"),_e=n("v-data-table"),A=n("v-card-title"),J=n("v-textarea"),I=n("v-card-text"),$=n("v-card"),K=n("v-form"),E=n("v-container"),H=n("v-dialog"),z=n("v-banner-text"),fe=n("v-banner"),W=n("v-spacer"),xe=n("v-card-actions");return U(),N(E,{fluid:""},{default:t(()=>[e(j,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(Y,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:t(()=>[e(j,{justify:"space-between"},{default:t(()=>[e(d,{cols:"12",sm:"4"},{default:t(()=>[e(r,{label:"Qidirish",modelValue:S.value,"onUpdate:modelValue":o[0]||(o[0]=a=>S.value=a),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"4",md:"3"},{default:t(()=>[e(_,{block:"",color:"primary",onClick:o[1]||(o[1]=a=>k.value=!0),variant:"tonal"},{default:t(()=>[h("Test yaratish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(Y,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:t(()=>[e(_e,{headers:ae,search:S.value,items:g.value},{"item.no":t(({index:a})=>[m("td",he,v(a+1)+".",1)]),"item.name":t(({item:a})=>[m("td",ge,v(a.raw.name),1)]),"item.science":t(({item:a})=>[m("td",ke,v(a.raw.science),1)]),"item.date":t(({item:a})=>[m("td",we,v(a.raw.date),1)]),"item.time":t(({item:a})=>[m("td",Ue,v(a.raw.time),1)]),"item.group":t(({item:a})=>[m("td",Ce,[e(G,{items:q.value,readonly:"",chips:"",multiple:"","item-value":"_id","item-title":"name",variant:"solo","hide-details":"",flat:"",modelValue:a.raw.groups,"onUpdate:modelValue":f=>a.raw.groups=f},null,8,["items","modelValue","onUpdate:modelValue"])])]),"item.count":t(({item:a})=>[m("td",Te,v(a.raw.count),1)]),"item.actions":t(({item:a})=>[m("td",Oe,[m("div",je,[e(_,{icon:"mdi-pencil",variant:"text",size:"40",color:"primary",onClick:f=>ne(a.raw)},null,8,["onClick"]),e(_,{icon:"mdi-sitemap",variant:"text",size:"40",onClick:f=>ie(a.raw),color:"primary"},null,8,["onClick"]),e(_,{icon:"mdi-delete",variant:"text",size:"40",color:"primary",onClick:f=>de(a.raw)},null,8,["onClick"])])])]),"no-data":t(()=>[$e]),_:1},8,["search","items"])]),_:1})]),_:1})]),_:1}),e(H,{modelValue:k.value,"onUpdate:modelValue":o[8]||(o[8]=a=>k.value=a),"max-width":"550px"},{default:t(()=>[e($,{class:"test-scroll"},{default:t(()=>[e(A,{class:"mt-2 ml-2 mb-0"},{default:t(()=>[m("span",ze,v(Ve(te)),1)]),_:1}),e(I,{class:"px-2 pt-0"},{default:t(()=>[e(E,null,{default:t(()=>[e(K,{ref_key:"form",ref:B},{default:t(()=>[e(j,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(r,{modelValue:s.value.name,"onUpdate:modelValue":o[2]||(o[2]=a=>s.value.name=a),label:"Test Nomi","hide-details":"",rules:i,color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(r,{modelValue:s.value.time,"onUpdate:modelValue":o[3]||(o[3]=a=>s.value.time=a),label:"Testga beriladigan vaqt","hide-details":"",rules:i,type:"number",color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(r,{modelValue:s.value.count,"onUpdate:modelValue":o[4]||(o[4]=a=>s.value.count=a),label:"Testlar soni","hide-details":"",rules:i,type:"number",color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(r,{modelValue:s.value.date,"onUpdate:modelValue":o[5]||(o[5]=a=>s.value.date=a),label:"Test vaqti",type:"date","hide-details":"",rules:i,color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(G,{modelValue:s.value.science,"onUpdate:modelValue":o[6]||(o[6]=a=>s.value.science=a),label:"Fan",rules:i,"hide-details":"",items:R.value,color:"primary","item-title":"name","item-value":"name",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(G,{modelValue:s.value.groups,"onUpdate:modelValue":o[7]||(o[7]=a=>s.value.groups=a),label:"Guruhi","hide-details":"",multiple:"",items:q.value,chips:"",color:"primary",rules:i,"item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(d,{cols:"12",class:"px-3"},{default:t(()=>[e(j,null,{default:t(()=>[(U(!0),X(ee,null,Z(p.value,(a,f)=>(U(),N(d,{cols:"12"},{default:t(()=>[e($,{variant:"outlined",class:"pa-2"},{default:t(()=>[e(J,{density:"compact",color:"primary","hide-details":"",label:"Test savoli","no-resize":"",variant:"outlined",rows:"3",rules:i,modelValue:a.text,"onUpdate:modelValue":x=>a.text=x},{"prepend-inner":t(()=>[m("div",null,v(f+1)+".",1)]),"append-inner":t(()=>[m("div",null,[e(_,{size:"x-small",variant:"text",icon:"mdi-close",color:"red",onClick:x=>P(f)},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(I,{class:"pa-0"},{default:t(()=>[e(r,{variant:"outlined",color:"primary",class:"my-2","hide-details":"",density:"compact",rules:i,label:"A variant (to'gri javob)",modelValue:a.variants[0].text,"onUpdate:modelValue":x=>a.variants[0].text=x},null,8,["modelValue","onUpdate:modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2","hide-details":"",rules:i,density:"compact",label:"B variant",modelValue:a.variants[1].text,"onUpdate:modelValue":x=>a.variants[1].text=x},null,8,["modelValue","onUpdate:modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2","hide-details":"",rules:i,density:"compact",label:"C variant",modelValue:a.variants[2].text,"onUpdate:modelValue":x=>a.variants[2].text=x},null,8,["modelValue","onUpdate:modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:i,"hide-details":"",density:"compact",label:"D variant",modelValue:a.variants[3].text,"onUpdate:modelValue":x=>a.variants[3].text=x},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),V.value===-1?(U(),N(d,{key:0,cols:"12"},{default:t(()=>[e(_,{variant:"tonal",color:"primary",block:"",onClick:me,height:"45"},{default:t(()=>[h(" Savol Qo'shish ")]),_:1})]),_:1})):be("",!0)]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(_,{variant:"tonal",color:"primary",block:"",onClick:oe,height:"45"},{default:t(()=>[h(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:T.value,"onUpdate:modelValue":o[14]||(o[14]=a=>T.value=a),"max-width":"550px"},{default:t(()=>[e($,{class:"test-scroll"},{default:t(()=>[e(A,{class:"mt-2 ml-2 mb-0"},{default:t(()=>{var a;return[m("span",Be,"Testlar ("+v((a=p.value)==null?void 0:a.length)+")",1)]}),_:1}),e(I,{class:"px-2 pt-0"},{default:t(()=>[e(E,null,{default:t(()=>[e(K,{ref_key:"form1",ref:C},{default:t(()=>[e(j,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e($,{variant:"tonal",class:"pa-2"},{default:t(()=>[e(J,{density:"compact",color:"primary","hide-details":"",label:"Test savoli","no-resize":"",rules:i,variant:"outlined",rows:"3",modelValue:u.value.text,"onUpdate:modelValue":o[9]||(o[9]=a=>u.value.text=a)},{"append-inner":t(()=>[e(_,{size:"small",variant:"text",onClick:se,icon:"mdi-text-box-plus",color:"green"})]),_:1},8,["modelValue"]),e(I,{class:"pa-0"},{default:t(()=>[e(r,{variant:"outlined",color:"primary",class:"my-2",rules:i,"hide-details":"",modelValue:u.value.variants[0].text,"onUpdate:modelValue":o[10]||(o[10]=a=>u.value.variants[0].text=a),density:"compact",label:"A variant (to'gri javob)"},null,8,["modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:i,"hide-details":"",modelValue:u.value.variants[1].text,"onUpdate:modelValue":o[11]||(o[11]=a=>u.value.variants[1].text=a),density:"compact",label:"B variant"},null,8,["modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:i,"hide-details":"",modelValue:u.value.variants[2].text,"onUpdate:modelValue":o[12]||(o[12]=a=>u.value.variants[2].text=a),density:"compact",label:"C variant"},null,8,["modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:i,"hide-details":"",modelValue:u.value.variants[3].text,"onUpdate:modelValue":o[13]||(o[13]=a=>u.value.variants[3].text=a),density:"compact",label:"D variant"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[(U(!0),X(ee,null,Z(p.value,(a,f)=>(U(),N(fe,{lines:"three",class:"my-1",key:f},{actions:t(()=>[e(_,{icon:"mdi-pencil",variant:"text",size:"40",onClick:x=>ue(a,f),color:"primary"},null,8,["onClick"]),e(_,{icon:"mdi-delete",variant:"text",size:"40",onClick:x=>P(f),color:"primary"},null,8,["onClick"])]),default:t(()=>[e(z,null,{default:t(()=>[m("span",Ie,v(f+1)+". "+v(a.text),1)]),_:2},1024),e(z,{class:"text-caption"},{default:t(()=>[h("a) "+v(a.variants[0].text),1)]),_:2},1024),e(z,{class:"text-caption"},{default:t(()=>[h("b) "+v(a.variants[1].text),1)]),_:2},1024),e(z,{class:"text-caption"},{default:t(()=>[h("c) "+v(a.variants[2].text),1)]),_:2},1024),e(z,{class:"text-caption"},{default:t(()=>[h("d) "+v(a.variants[3].text),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:O.value,"onUpdate:modelValue":o[15]||(o[15]=a=>O.value=a),"max-width":"500px"},{default:t(()=>[e($,null,{default:t(()=>[e(A,{class:"text-h6"},{default:t(()=>[h(" Вы уверены, что хотите удалить этот элемент? ")]),_:1}),e(xe,null,{default:t(()=>[e(W),e(_,{color:"blue-darken-1",variant:"text",onClick:F},{default:t(()=>[h(" Отмена ")]),_:1}),e(_,{color:"blue-darken-1",variant:"text",onClick:re},{default:t(()=>[h(" Да ")]),_:1}),e(W)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{qe as default};
